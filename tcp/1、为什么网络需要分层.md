<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [网络学习](#%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0)
  - [一些基础的知识点学习](#%E4%B8%80%E4%BA%9B%E5%9F%BA%E7%A1%80%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E5%AD%A6%E4%B9%A0)
  - [IP](#ip)
    - [分类 IP 地址](#%E5%88%86%E7%B1%BB-ip-%E5%9C%B0%E5%9D%80)
    - [无类型域间选路（CIDR）](#%E6%97%A0%E7%B1%BB%E5%9E%8B%E5%9F%9F%E9%97%B4%E9%80%89%E8%B7%AFcidr)
      - [子网掩码](#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81)
      - [广播地址](#%E5%B9%BF%E6%92%AD%E5%9C%B0%E5%9D%80)
  - [MAC地址](#mac%E5%9C%B0%E5%9D%80)
  - [网络设备标识](#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E6%A0%87%E8%AF%86)
  - [参考](#%E5%8F%82%E8%80%83)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 网络学习

### 一些基础的知识点学习  

```shell
root@test:~# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether fa:16:3e:c7:79:75 brd ff:ff:ff:ff:ff:ff
    inet 10.100.122.2/24 brd 10.100.122.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::f816:3eff:fec7:7975/64 scope link 
       valid_lft forever preferred_lft forever
```

### IP

IP 地址就是一个网卡在网络世界的通讯地址，相当于我们现实世界的门牌号码。  

IP 地址是一个唯一的 32 位标识符。  

IP 地址最基本的编址方法就是：**分类 IP 地址**编址。     

#### 分类 IP 地址

分类 IP 地址：就是将 IP 地址划分成若干个分类，每一类地址都有两个固定长度的字段组成。  

第一个字段是网络号：标志着主机（或路由器）所连接的网络，一个网络号在整个互联网中是唯一的。  

第二个字段是主机号：主机号用于识别该网络中的主机。一台主机号在它前面的网络号做指定的网络的范围内必须是唯一的。   

所以网络号的唯一，加上主机号在网络号中的唯一，可以得出 IP 地址在整个互联网内是唯一的。  

`IP 地址：={<网络号>，<主机号>}`     

分类 IP 地址在设计的过程中，前面一部分是网络号，后面一部分是主机号。    

<img src="/img/ip/ip-class.jpg"  alt="tcp" />   

对于主机和路由器来来说，IP 地址都是 32 位的二进制代码，但是这样可读性不好，所以引入了**点分十进制记法**。  

点分十进制记法：为了提高可读性，尝尝把 32 位的 IP 地址中每 8 位插入一个空格（机器中是没有这样的空格）。同时用等效的十进制数字表示，同时加入一个点。  

<img src="/img/ip/ip-class-1.jpg"  alt="tcp" />   

知道了如何分类，我们就能算出 IP 地址的指派范围  

<img src="/img/ip/ip-class-2.jpg"  alt="tcp" />     

这样划分还是有点不科学，不如 c 类地址，同一个网络下面只有 254 个主机，显然是有点少了，B 类地址中，同一个网络中可以放65534台主机，这显然有点多了，一般企业达不到这样的规模。  

所以有了一个折中的方式叫作无类型域间选路，简称CIDR  

#### 无类型域间选路（CIDR）

无类型域间选路（CIDR）打破了原来设计中的几类地址的做法，将 32 位的 IP 地址一分为二，**前面是网络号，后面是主机号**。    

栗如：`10.100.122.2/24`   

这个 IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示形式，就是 CIDR。后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号。    

伴随着CIDR存在的，有两个很重要的网络概念出现：  

1、子网掩码；  

2、广播地址。   

##### 子网掩码

子网掩码是一种用来指明一个IP地址所标示的主机处于哪个子网中。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。  

子网掩码是一个32位地址：  

对于A类地址来说，默认的子网掩码是 `255.0.0.0`；

对于B类地址来说默认的子网掩码是 `255.255.0.0`；

对于C类地址来说默认的子网掩码是 `255.255.255.0`。    

子网掩码的规则：  

用户连续的1对应网络号和子网号；  

用连续的0对应主机号，得到32位的二进制；  

将子网掩码和IP地址按位计算AND，就可得到网络号。   

##### 广播地址

广播地址(Broadcast Address)是专门用于同时向网络中所有工作站进行发送的一个地址。  

在使用TCP/IP 协议的网络中，主机标识段为全1 的 IP 地址为广播地址，广播的分组传送给段所涉及的所有计算机。

栗如：  

对于10.1.1.0 （255.255.255.0 ）网段，其广播地址为10.1.1.255 （255 即为2 进制的11111111 ），当发出一个目的地址为10.1.1.255 的分组（封包）时，它将被分发给该网段上的所有计算机。  

### MAC地址 

MAC地址：（英语：Media Access Control Address），直译为媒体访问控制地址，也称为局域网地址（LAN Address），以太网地址（Ethernet Address）或物理地址（Physical Address），它是一个用来确认网络设备位置的地址。  

MAC地址是全局唯一的，不会有两个相同的网卡有相同的 MAC 地址，MAC 地址都是由生产厂家在生产时固化在网络硬件中，是硬件预留的地址。   

MAC地址更像是身份证，是一个唯一的标识。它的唯一性设计是为了组网的时候，不同的网卡放在一个网络里面的时候，可以不用担心冲突。从硬件角度，保证不同的网卡有不同的标识。  

MAC地址的通讯，只限于同一个子网中，如果跨子网就不能通信了。  

### 网络设备标识

<BROADCAST,MULTICAST,UP,LOWER_UP>这个叫作`net_device flags`，网络设备的状态标识。    

UP表示网卡处于启动的状态；  

`BROADCAST`表示这个网卡有广播地址，可以发送广播包；  

`MULTICAST`表示网卡可以发送多播包；  

`LOWER_UP`表示L1是启动的，也即网线插着呢。  

`MTU1500`是指什么意思呢？是哪一层的概念呢？最大传输单元MTU为1500，这是以太网的默认值。

### 参考

【极客时间-趣谈网络协议】https://time.geekbang.org/column/intro/100007101  
【子网掩码是什么？有什么作用？】https://zhuanlan.zhihu.com/p/371400090    


