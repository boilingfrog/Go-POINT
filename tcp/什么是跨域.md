<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [什么是跨域](#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%A8%E5%9F%9F)
  - [前言](#%E5%89%8D%E8%A8%80)
  - [什么是跨域](#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%A8%E5%9F%9F-1)
  - [什么是同源策略](#%E4%BB%80%E4%B9%88%E6%98%AF%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5)
    - [非同源的限制条件](#%E9%9D%9E%E5%90%8C%E6%BA%90%E7%9A%84%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6)
  - [参考](#%E5%8F%82%E8%80%83)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 什么是跨域

### 前言

作为一名后端开发工程师，在给前端同事写接口的时候，经常碰到他们讲，你的接口跨域了，那么什么是跨域，这里来研究下。   

### 什么是跨域

先来看下跨域的定义  

跨域的广义定义：跨域是指一个域下的文档或脚本试图去请求另一个域下的资源。  

我们经常遇到的跨域是由浏览器同源策略限制的一类请求场景。  

栗如，下面的请求就发生了跨域，在京东的 H5 页面中请求淘宝的接口  

<img src="/img/ip/cors_1.jpg"  alt="redis" align="tcp" />  

上面栗子中跨域最终的罪魁祸首就是浏览器的同源策略，浏览器的同源策略限制我们只能在相同的协议、IP地址、端口号相同，如果有任何一个不通，都不能相互的获取数据。  

并且，http和https之间也存在跨域，因为https一般采用的是443端口，http采用的是80端口或者其他。  

### 什么是同源策略

同源策略/SOP `（Same origin policy）`是一种约定，由 Netscape 公司1995年引入浏览器。  

同源策略是指在 Web 浏览器中，允许某个网页脚本访问另一个网页的数据，但前提是这两个网页必须满足三个相同:     

1、协议相同；    

2、域名相同；   
 
3、端口相同； 

一旦两个网站满足上述条件，这两个网站就被认定为具有相同来源。  

#### 非同源的限制条件

如果两个网站非同源，将受到下面的几种限制  

1、Cookie、LocalStorage 和 IndexDB 无法读取；  

2、DOM 无法获得；  

3、AJAX 请求不能发送。  

同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。  

栗如：Cookie 中存了一些用户的登陆信息，如果没有同源策略的限制，那么任何网页都能访问 Cookie，用户的信息就会泄露了，就能伪造用户信息登陆目标网站了，这显然是有很大的安全隐患的。   



### 参考

【跨域资源共享 CORS 详解】https://www.ruanyifeng.com/blog/2016/04/cors.html  
【前端常见跨域解决方案】https://segmentfault.com/a/1190000011145364    
【浏览器同源政策及其规避方法】https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html  
【Same-origin_policy】https://en.wikipedia.org/wiki/Same-origin_policy  
