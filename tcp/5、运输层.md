<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [运输层](#%E8%BF%90%E8%BE%93%E5%B1%82)
  - [为什么需要运输层](#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%BF%90%E8%BE%93%E5%B1%82)
  - [TCP 和 UDP](#tcp-%E5%92%8C-udp)
    - [TCP 和 UDP 的特点](#tcp-%E5%92%8C-udp-%E7%9A%84%E7%89%B9%E7%82%B9)
      - [UDP](#udp)
      - [TCP](#tcp)
  - [参考](#%E5%8F%82%E8%80%83)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 运输层

### 为什么需要运输层

运输层（传输层），解决的是计算机程序到计算机程序之间的通信问题，即所谓的“端”到 “端”的通信。    

⽹络层最终解决的问题：

分组从⼀台主机经过⽹络到达另⼀台主机，即主机到主机间的通信。

⽹络层没有解决的问题： 

1、主机中谁发送的数据、谁接收数据；  

2、IP分组⽆序到达⽬的主机，接收进程如何处理；  

3、可靠传输问题。  

引入传输层的原因： 

1、增加复用和分用的功能；  

2、消除网络层的不可靠性；  

3、提供从源端主机到目的端主机的可靠的、与实际使用的网络无关的信息传输。      

<img src="/img/ip/ip-transport-effect.jpg"  alt="tcp" />

进程之间的通信  

从 IP 的角度，通信的两端是两台主机。但“两台主机之间的通信”这种说法还不够清楚；严格地讲，两台主机进⾏通信就是两台主机中的应⽤进程互相通信；  

从运输层的⻆度看，通信的真正端点并不是主机⽽是主机中的进程。也就是说，端到端的通信是应⽤进程之间的通信。  

网络层和运输层的区别  

<img src="/img/ip/ip-transport-different-with-network.jpg"  alt="tcp" />  

### TCP 和 UDP 

根据应⽤程序的不同需求，运输层需要有两种不同的运输协议：

1、即⾯向连接的 TCP；

2、⽆连接的 UDP。

这两种协议的差别

TCP 是可靠的，UDP 是不可靠的。

<img src="/img/ip/ip-transport-tcp-udp.jpg"  alt="tcp" />      

#### TCP 和 UDP 的特点

##### UDP 

UDP 的主要特点  

1、不需要建⽴连接：减少开销和发送数据之前的时延；  

2、尽最⼤努⼒交付：即不保证可靠交付；  

3、⾯向报⽂的：⼀次交付⼀个完整的报⽂，保留原始报⽂的边界；  

- 发送方的 UDP 程序对应用程序交下来的报文，添加首部后，就向下交付 IP 层。UDP 对应应用层交下来的报文，即不合并也不拆分，而是保留这些报文的边界。也就是说，应用层交给 UDP 多长的报文，UDP 就照样发，即一次发送一个报文。 

- 接收方的 UDP ，对于 IP 层交上来的 UDP 用户数据报，在去除首部后就原封不动的交付给上层的应用进程。也就是说 UDP 一次交付一个完整的报文。   

4、没有拥塞控制：⽹络出现拥塞不会降低源主机的发送速率；对某些实时应⽤是很重要的。  

5、⽀持多种交互通信： • ⽀持⼀对⼀、⼀对多、多对⼀和多对多的交互通信。  

6、⾸部开销⼩：8 个字节，⽐ TCP 的 20 个字节的⾸部要短。  

##### TCP

**TCP协议：**  

1、提供⾯向连接的服务；  

2、传送的数据单位协议是 TCP 报⽂段 (segment)； 

3、TCP 不提供⼴播或多播服务；    

4、收到TCP报⽂段后，需要确认；  

5、协议复杂、开销⼤，占⽤较多的处理机资源；  

6、应⽤较多：万维⽹、电⼦邮件、⽂件传送等。


### 参考

【极客时间-趣谈网络协议】https://time.geekbang.org/column/intro/100007101  
【计算机网络第八版】https://www.bilibili.com/video/BV1WP4y1j7JU?p=1  
【计算机网络学习笔记】https://github.com/boilingfrog/Go-POINT/tree/master/tcp     






