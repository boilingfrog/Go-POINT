<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [AI 小说漫画推文](#ai-%E5%B0%8F%E8%AF%B4%E6%BC%AB%E7%94%BB%E6%8E%A8%E6%96%87)
  - [前言](#%E5%89%8D%E8%A8%80)
  - [整体的处理流程](#%E6%95%B4%E4%BD%93%E7%9A%84%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B)
  - [小说内容的提炼重新创作](#%E5%B0%8F%E8%AF%B4%E5%86%85%E5%AE%B9%E7%9A%84%E6%8F%90%E7%82%BC%E9%87%8D%E6%96%B0%E5%88%9B%E4%BD%9C)
  - [角色任务的一致性](#%E8%A7%92%E8%89%B2%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7)
  - [如何合成视频](#%E5%A6%82%E4%BD%95%E5%90%88%E6%88%90%E8%A7%86%E9%A2%91)
  - [总结](#%E6%80%BB%E7%BB%93)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## AI 小说漫画推文

### 前言

最近公司在考虑做 AI 小说漫画推文，将小说的内容转换成合适的场景图片，配合 AI 语音，加上小说内容内容字幕，将这些内容合成视频。  

将漫画，小说，听书，三者结合起来。简单听起来，实现难度不是很大，但是真的做起来，发现没有这么简单了。   

主要涉及到下面的几个难点：  

1、小说内容的提炼浓缩，原文的小说内容是比较臃长的，如果直接将内容不加修饰就制作成视频，吸引力不大；  

2、小说内容会出现不同的人物，使用 AI 生成视频，虽然生成的质量整体上是可以的，但是角色形象的一致性存在问题，可能第一个画面，小明还是个帅哥，后面就变成了大叔；  

3、合成视频的时候，小说内容，图片画面，播放音色，如果合成保持一致也是个问题。   

当前有人会说，手动处理就行了，当然全人工这些都不是问题，但是时间，人工成本就太大了。远远比不上 AI 的自动化生成。   

下面是自己进行的一些技术调研和尝试  

### 整体的处理流程

首先这里来梳理下整体使用到的技术和处理流程  

1、使用 gpt 生成对小说内容进行提炼，生成小说内容的分镜头；  

2、同样使用 gpt 对小说内容进行提炼，生成适合 sd 出图的关键词；  

3、因为出图的时候，小说内容中会有多个人物，并且每个人物会出现多次，所以我们需要控制好每个人物的形象特点；  

4、这里首先定义好每个人物的特点，sd 中人物可以结合是 lora 使用，不同的人物使用不同的 lora ，在 gpt 生成关键词的时候，对镜头中出现的既定人物使用我们定义好的人物形象来描述；  

5、对每个镜头的原文，通过指定的音色，调用语音合成服务生成一段语音朗读，这里有很多云服务都可以选用，openai,火山云，阿里云。。。。

6、通过 FFmpeg 将每个每个镜头的语音片段和图片，生成该镜头的视频，同时添加放大缩小的动态效果；  

7、最近按照顺序将所有的小说视频合成一个视频，通过剪影配上字幕，水印，调整视频的尺寸，整个视频完成。   

### 小说内容的提炼重新创作

小说推文，主要有三部分组成，内容，适配内容的图片，解说的语音。  

其中最重要的就是内容，和声音。图片的好坏就是锦上添花。   

所以如何把一个完整的小说进行提炼，总结提炼出一段30分钟左右的内容精华，不是一个很容易的事情。  

因为目前市面上流行的 ai 大模型，都对过长的文本支持的不是很友好，所以这块我的处理办法是先提炼小说每个章节大纲，然后让 ai 对总结出来的所有大纲，进行
内容的复写和核心亮点的提炼。  

### 角色任务的一致性

角色的一致性

### 如何合成视频

### 总结


