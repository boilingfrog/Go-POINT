<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [k8s 总体概览](#k8s-%E6%80%BB%E4%BD%93%E6%A6%82%E8%A7%88)
  - [前言](#%E5%89%8D%E8%A8%80)
  - [POD](#pod)
  - [副本控制器（Replication Controller，RC）](#%E5%89%AF%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%99%A8replication-controllerrc)
    - [副本集（Replica Set，RS）](#%E5%89%AF%E6%9C%AC%E9%9B%86replica-setrs)
    - [部署（Deployment）](#%E9%83%A8%E7%BD%B2deployment)
    - [服务（Service）](#%E6%9C%8D%E5%8A%A1service)
  - [参考](#%E5%8F%82%E8%80%83)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## k8s 总体概览

### 前言

学习 k8s 之前首先对 k8s 中具体的组件做个简单的了解。   

### POD 

POD 是 k8s 中集群部署应用和服务的最小单元，一个 pod 中可以部署多个容器。  

Pod 的设计理念是支持多个容器在一个 Pod 中共享网络地址和文件系统，可以通过进程间通信和文件共享这种简单高效的方式组合完成服务。Pod 对多容器的支持是 K8 最基础的设计理念。  

### 副本控制器（Replication Controller，RC）

RC 是 k8s 集群中最早的保证 Pod 高可用的 API 对象。它的作用就是保证集群中有指定数目的 pod 运行。     

当前运行的 pod 数目少于指定的数目，RC 就会启动新的 pod 副本，保证运行 pod 数量等于指定数目。  

当前运行的 pod 数目大于指定的数目，RC 就会杀死多余的 pod 副本。   

#### 副本集（Replica Set，RS）

RS 是新一代 RC，提供同样的高可用能力，区别主要在于 RS 后来居上，能支持更多种类的匹配模式。副本集对象一般不单独使用，而是作为 Deployment 的理想状态参数使用。  

#### 部署（Deployment）

Deployment 提供了一种对 Pod 和 ReplicaSet 的管理方式，每一个 Deployment 都对应集群中的一次部署，是非常常见的 Kubernetes 对象。   

Deployment 是一个比 RS 应用模式更广的 API 对象，可以用来创建一个新的服务，更新一个新的服务，也可以用来滚动升级一个服务。   

滚动升级一个服务，滚动升级一个服务，实际是创建一个新的 RS，然后逐渐将新 RS 中副本数增加到理想状态，将旧 RS 中的副本数减小到 0 的复合操作；这样一个复合操作用一个 RS 是不太好描述的，所以用一个更通用的 Deployment 来描述。   

#### 服务（Service）  

RC、RS 和 Deployment 只是保证了支撑服务的微服务 Pod 的数量。但是没有解决如何访问这些服务的问题。  

一个 Pod 只是一个运行服务的实例，随时可能在节点上停止，然后再新的节点上用一个新的 IP 启动一个新的 Pod,因此不能使用确定的 IP 和端口号提供服务。这对于业务来说，就不能根据 Pod 的 IP 作为业务调度。kubernetes 就引入了 Service 的概 念，它为 Pod 提供一个入口，主要通过 Labels 标签来选择后端Pod，这时候不论后端 Pod 的 IP 地址如何变更，只要 Pod 的 Labels 标签没变，那么 业务通过 service 调度就不会存在问题。   



### 参考

【Kubernetes 的设计理念】https://jimmysong.io/kubernetes-handbook/concepts/concepts.html    
【Kubernetes中文文档】http://docs.kubernetes.org.cn/  

