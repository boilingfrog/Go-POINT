<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [消息队列常见问题处理](#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86)
  - [分布式事务](#%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1)
    - [什么是分布式事务](#%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1)
    - [常见的分布式事务解决方案](#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88)
  - [消息防丢失](#%E6%B6%88%E6%81%AF%E9%98%B2%E4%B8%A2%E5%A4%B1)
  - [消息重复发送](#%E6%B6%88%E6%81%AF%E9%87%8D%E5%A4%8D%E5%8F%91%E9%80%81)
  - [处理消息的挤压](#%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%E7%9A%84%E6%8C%A4%E5%8E%8B)
  - [参考](#%E5%8F%82%E8%80%83)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 消息队列常见问题处理

### 分布式事务

#### 什么是分布式事务

我们的服务器从单机发展到拥有多台机器的分布式系统，各个系统之前需要借助于网络进行通信，原有单机中相对可靠的方法调用以及进程间通信方式已经没有办法使用，同时网络环境也是不稳定的，造成了我们多个机器之间的数据同步问题，这就是典型的分布式事务问题。  

在分布式事务中事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于不同的分布式系统的不同节点之上。分布式事务就是要保证不同节点之间的数据一致性。    

#### 常见的分布式事务解决方案

1、2PC(二阶段提交)方案 —— 强一致性  

2、3PC(三阶段提交)方案  

3、TCC （Try-Confirm-Cancel）事务 —— 最终一致性   

4、本地消息表 —— 最终一致性   






### 消息防丢失

### 消息重复发送

### 处理消息的挤压

### 参考  

【消息队列高手课】https://time.geekbang.org/column/intro/100032301     
【消息队列设计精要】https://tech.meituan.com/2016/07/01/mq-design.html    
【RabbitMQ实战指南】https://book.douban.com/subject/27591386/      
【分布式事务最经典的七种解决方案】https://segmentfault.com/a/1190000040321750     
【分布式事务的实现原理】https://draveness.me/distributed-transaction-principle/   
【理解分布式事务】https://juejin.cn/post/6844903734753886216     