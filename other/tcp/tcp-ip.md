## tcp/ip

### 第一章

tcp/ip的分层

可分为四层  

1、应用层

负责处理特定的应用程序的细节。   

2、运输层  

主要为两台主机上的应用程序提供端到端的通信，主要是tcp和udp。   

3、网络层  

也称作互联网层，处理分组在网络中的活动。例如分组的选路。在`TCP/IP`协议族中，网络层协议包括 IP协议（网际协议），ICMP协议（Internet互联网控制报文协议），以及IGMP协议（Internet组管理协议）。  

4、链路层  

有时也称作数据链路层或网络接口层，通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡。它们一起处理与电缆（或其他任何传输媒介）的物理接口细节。  

![channel](/img/tcp-ip_1.jpg?raw=true)

#### 数据的封装

当程序使用tcp传输数据的时候，数据被送入协议栈，然后逐个通过每一层，最后被当成比特流送入网络。在通过每一层的时候，都会对数据增加一些头部信息或尾部信息，来封装请求的数据。  

![channel](/img/tcp-ip_2.jpg?raw=true)

TCP传给IP的数据单元称作 TCP报文段或简称为 TCP段（TCP segment）。  

IP传给网络接口层的数据单元称作 IP数据报(IP datagram)。  

通过以太网传输的比特 流称作帧(Frame)。  

由于TCP、UDP、ICMP和IGMP都要向IP传送数据，因此IP必须在生成的IP首部中加入某种标识，以表明数据属于哪一层。为此，IP在首部中存入一个长度为8bit的数值，称作协议域。  

- 1表示为ICMP协议，
- 2表示为IGMP协议，
- 6表示为TCP协议， 
- 17表示为UDP协议。  

### 链路层

链路层主要有三个目的：  
1、为IP模块发送和 接收IP数据报；  
2、为ARP模块发送ARP请求和接收ARP应答；  
3、为RARP发送RARP请 求和接收RARP应答。   


### IP

IP是TCP/IP协议族中最为核心的协议。所有的 TCP、UDP、ICMP及IGMP数据都以IP数据 报格式传输。  